{% extends 'base.html' %}

{% block content %}
<!-- content -->
<div class="card col-md-4">
    <div class="card-header">
        할일 목록
    </div>
    <ul class="list-group list-group-flush" id="todoList">
        <!-- 입력 폼 -->
        <li class="list-group-item">
            <form class="row" id="formCreate">
                <div class="col-auto">
                    <input type="text" class="form-control" placeholder="할일 입력" name="todo_text" id="todoText">
                </div>
                <div class="col-auto">
                    <button type="button" class="btn btn-primary" id="btnCreate">등록</button>
                </div>
            </form>
        </li>
        <!--// 입력 폼 -->
        
    </ul>                    
</div>
<!--// content -->
{% endblock %}

{% block script %}
<script>
    let id = 1;

    function update(id) {
        $('#text' + id).addClass('d-none');
        $('.btn-update-delete' + id).addClass('d-none');
        $('.input' + id).removeClass('d-none');
        $('.div-btn-cancel' + id).removeClass('d-none');
    }

    function cancel(id) {
        $('#text' + id).removeClass('d-none');
        $('.btn-update-delete' + id).removeClass('d-none');
        $('.input' + id).addClass('d-none');
        $('.div-btn-cancel' + id).addClass('d-none');
    }

    // 등록
    $('#btnCreate').on('click', function () {
        // 변수 선언
        let todoText = $('#todoText');

        // 입력 내용 확인
        if () {

        } else {
            let li = '<li class="list-group-item">';
                li += '<div class="d-flex">';
                li += '<div class="me-auto">';
                li += '<span id="text' + id + '">' + todoText.val() + '</span>';
                li += '<input type="text" class="form-control d-none input' + id + '" placeholder="할일 입력" name="todo_text" value="' + todoText.val() + '">';
                li += '</div>';
                li += '<div class="btn-group btn-update-delete' + id + '">';
                li += '<button type="button" class="btn btn-warning" onclick="update(' + id + ')">수정</button>';
                li += '<button type="button" class="btn btn-danger" onclick="delete(' + id + ')">삭제</button>';
                li += '</div>';
                li += '<div class="btn-group d-none div-btn-cancel' + id + '">';
                li += '<button type="button" class="btn btn-primary" onclick="updateConfirm(' + id + ')">확인</button>';
                li += '<button type="button" class="btn btn-danger" onclick="cancel(' + id + ')">취소</button>';
                li += '</div>';
                li += '</div>';
                li += '</li>';
        
                // li를 추가
                $('#todoList').append(li);
        
                // toDoText 내용 비우기
                todoText.val('');
        
                id++;
        }
    });
</script>
{% endblock %}